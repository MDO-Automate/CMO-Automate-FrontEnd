<p-table
  class="p-10 z-0"
  currentPageReportTemplate="{first} de {last} total {totalRecords}"
  [resizableColumns]="true"
  [paginator]="true"
  [rows]="10"
  [showCurrentPageReport]="true"
  [value]="data"
  [tableStyle]="{ 'min-width': '50rem' }"
>
  <ng-template pTemplate="header">
    <tr class="text-sm">
      <th>ID Sae</th>
      <th>Vehiculo</th>
      <th>Tipo</th>
      <th>Empleado</th>
      <th>Linea</th>
      <th>Itinerario</th>
      <th>Hora salida</th>
      <th>H-T</th>
      <th>Inicio servicio</th>
      <th>Fin servicio</th>
      <th>Tiempo viaje</th>
      <th>Distancia</th>
      <th>Retraso</th>
      <th>Expedici√≥n</th>
      <th>Inicio servicio efectivo</th>
      <th>Fin servicio efectivo</th>
      <th>Tiempo efectivo</th>
      <th>Retraso</th>
      <th>PMR</th>
      <th>% Paradas</th>
      <th>% Distancia</th>
      <th>% Tiempo</th>
      <th>KM 1</th>
      <th>KM 2</th>
      <th>KM 3</th>
      <th>KM 4</th>
      <th>D < 500</th>
      <th>D < M y P > 99%</th>
      <th>D > 0 y P < 5%</th>
      <th>Fuera de horario</th>
      <th>Mal enrutamiento</th>
      <th>Fecha</th>
      <th *ngIf="isEditable || isConciliation">Incidencia</th>
      <th *ngIf="isEditable || isConciliation">Observaciones</th>
      <th *ngIf="isConciliation">Conciliado</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-km>
    <tr class="border-b border-gray-300 text-sm">
      <td>{{ km.idSae }}</td>
      <td>{{ km.vehiculo }}</td>
      <td>{{ km.tipo }}</td>
      <td>{{ km.empleado }}</td>
      <td>{{ km.linea }}</td>
      <td>{{ km.itinerario }}</td>
      <td>{{ km.horaSalida }}</td>
      <td>{{ km.ht }}</td>
      <td>{{ km.inicioServicio | dateTime }}</td>
      <td>{{ km.finServicio | dateTime }}</td>
      <td>{{ km.tiempoViaje }}</td>
      <td>{{ km.distancia }}</td>
      <td>{{ km.retraso }}</td>
      <td>{{ km.expedicion }}</td>
      <td>{{ km.inicioServicioEfectivo | dateTime }}</td>
      <td>{{ km.finServicioEfectivo | dateTime }}</td>
      <td>{{ km.tiempoEfectivo }}</td>
      <td>{{ km.retrasoE }}</td>
      <td>{{ km.pmr }}</td>
      <td>{{ km.porcParada }}</td>
      <td>{{ km.porcDistancia }}</td>
      <td>{{ km.porcTiempo }}</td>
      <td>
        <p-inputNumber
          [disabled]="!isConciliation"
          class="w-20"
          inputStyleClass="w-20"
          [(ngModel)]="km.km1"
          inputId="integeronly"
        >
        </p-inputNumber>
      </td>
      <td>
        <p-inputNumber
          [disabled]="!isConciliation"
          class="w-20"
          inputStyleClass="w-20"
          [(ngModel)]="km.km2"
          inputId="integeronly"
        >
        </p-inputNumber>
      </td>
      <td>
        <p-inputNumber
          [disabled]="!isConciliation"
          class="w-20"
          inputStyleClass="w-20"
          [(ngModel)]="km.km3"
          inputId="integeronly"
        >
        </p-inputNumber>
      </td>
      <td>
        <p-inputNumber
          [disabled]="!isConciliation"
          class="w-20"
          inputStyleClass="w-20"
          [(ngModel)]="km.km4"
          inputId="integeronly"
        >
        </p-inputNumber>
      </td>
      <td>{{ km.minor500 | yesNo }}</td>
      <td>{{ km.distanciaYMedia | yesNo }}</td>
      <td>{{ km.distanciaYParadas | yesNo }}</td>
      <td>{{ km.fueraHorario | yesNo }}</td>
      <td>{{ km.malEnrutado | yesNo }}</td>
      <td>{{ km.fecha | date }}</td>
      <td *ngIf="isEditable">
        <div class="card flex justify-content-center ">
          <p-dropdown
            [options]="incidences"
            optionLabel="nombre"
            optionValue="id"
            styleClass="w-52 border"
            panelStyleClass="text-sm"
            tooltipStyleClass="text-sm"
            [(ngModel)]="km.incidencia"
          ></p-dropdown>
        </div>
      </td>
      <td *ngIf="isConciliation">
        <div class="flex justify-content-center  text-sm">
          <p-dropdown
            [options]="incidences"
            panelStyleClass="text-sm"
            optionLabel="nombre"
            optionValue="id"
            styleClass="w-52 border text-sm"
            [(ngModel)]="km.incidencia.id"
          ></p-dropdown>
        </div>
      </td>
      <td *ngIf="isEditable || isConciliation">
        <textarea  
          [disabled]="!(km.incidencia !== 0) || !(km.incidencia.id !== 0)"      
          class="textarea textarea-bordered textarea-xs w-full max-w-xs h-5 resize-none"
          [(ngModel)]="km.obs"
          rows="5"
          cols="30"
        ></textarea>
      </td>
      <td *ngIf="isConciliation">
        <p-checkbox
          class="border-2 rounded"
          [(ngModel)]="km.conciliado"
          [binary]="true"
        >
        </p-checkbox>
      </td>
    </tr>
  </ng-template>
</p-table>
